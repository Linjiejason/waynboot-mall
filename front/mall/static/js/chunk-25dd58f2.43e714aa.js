(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-25dd58f2"],{"212a":function(t,e,r){"use strict";r("f732")},2166:function(t,e,r){"use strict";r.d(e,"f",(function(){return a})),r.d(e,"e",(function(){return c})),r.d(e,"a",(function(){return o})),r.d(e,"b",(function(){return s})),r.d(e,"h",(function(){return i})),r.d(e,"c",(function(){return u})),r.d(e,"d",(function(){return d})),r.d(e,"g",(function(){return l}));r("99af");var n=r("b775");function a(){return Object(n["a"])({url:"/cart/list",method:"get"})}function c(){return Object(n["a"])({url:"/cart/goodsCount",method:"get"})}function o(t){return Object(n["a"])({url:"/cart",method:"post",data:t})}function s(t){return Object(n["a"])({url:"/cart/addDefaultGoodsProduct",method:"post",data:t})}function i(t){return Object(n["a"])({url:"/cart",method:"put",data:t})}function u(t,e){return Object(n["a"])({url:"/cart/changeNum/".concat(t,"/").concat(e),method:"post"})}function d(t){return Object(n["a"])({url:"/cart/"+t,method:"delete"})}function l(){return Object(n["a"])({url:"/cart/getCheckedGoods",method:"post"})}},"4b12":function(t,e,r){"use strict";r.r(e);var n=function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",{staticClass:"order-confirm"},[r("nav-bar",{attrs:{title:t.$route.meta.title}}),r("van-contact-card",{attrs:{type:t.contact.type,name:t.contact.name,tel:t.contact.tel},on:{click:t.onContact}}),r("div",{staticClass:"list"},[r("list-item")],1)],1)},a=[],c=r("5530"),o=(r("b0c0"),r("e9c4"),r("2f62")),s=function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",{staticClass:"list-item"},[r("h3",{staticClass:"title"},[r("van-icon",{attrs:{name:"shop-o"}}),r("span",{staticClass:"title__name"},[t._v("熊猫商城自营")])],1),t._l(t.goodsList,(function(e,n){return r("div",{key:n,staticClass:"item"},[r("image-pic",{attrs:{width:"80",height:"80",fit:"fill",src:e.picUrl}}),r("div",{staticClass:"item__main"},[r("p",{staticClass:"item__main__desc van-multi-ellipsis--l2"},[t._v(" "+t._s(e.goodsName)+" ")]),r("p",{staticClass:"item__main__attr"},t._l(e.specifications,(function(e,n){return r("span",{key:n},[t._v(t._s(e))])})),0)]),r("div",{staticClass:"item__price"},[r("span",{staticClass:"item__price__price"},[t._v("¥"+t._s(e.price))]),r("span",{staticClass:"item__price__count"},[t._v("x"+t._s(e.number))])])],1)})),r("van-cell-group",[r("van-cell",{attrs:{title:"商品金额"}},[r("span",{staticClass:"red"},[t._v(t._s(t.amount)+" 元")])]),r("van-cell",{attrs:{title:"邮费"}},[r("span",{staticClass:"red"},[t._v("0 元")])]),r("van-cell",{attrs:{title:"优惠券"}},[r("span",{staticClass:"red"},[t._v("不可用")])]),r("van-field",{attrs:{placeholder:"请输入备注",label:"订单备注"},model:{value:t.message,callback:function(e){t.message=e},expression:"message"}},[r("template",{slot:"icon"},[t._v(t._s(500)+"/50")])],2)],1),r("van-submit-bar",{attrs:{price:100*t.amount,label:"总计：","button-text":"提交订单",disabled:!1},on:{submit:t.onSubmit}})],2)},i=[],u=r("1da1"),d=(r("96cf"),r("d81d"),r("2166")),l=r("f8b7"),f={data:function(){return{message:"",amount:0,goodsList:[],orderSn:void 0,actualPrice:0,retryCount:6,retryInterval:300}},computed:Object(c["a"])({},Object(o["b"])(["selectedAddress","id"])),activated:function(){this.getGoodsList()},methods:{getGoodsList:function(){var t=this;this.goodsList=[],Object(d["g"])().then((function(e){var r=e.map,n=r.data,a=r.amount;t.goodsList=n,t.amount=a}))},onSubmit:function(){var t=this,e=this.selectedAddress.id;if(!e)return this.$toast.fail("请选择地址");var r=this.goodsList.map((function(t){return t.id})),n=this.message,a=this.id;this.$toast.loading({duration:0,forbidClick:!0,message:"下单中，请稍后"}),this.retryCount=6,Object(l["k"])({cartIdArr:r,addressId:e,userId:a,message:n}).then((function(e){var r=e.map,n=r.orderSn,a=r.actualPrice;t.orderSn=n,t.actualPrice=a,setTimeout((function(){t.searchResult()}),t.retryInterval)}))},searchResult:function(){var t=this;return Object(u["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,Object(l["i"])(t.orderSn);case 3:t.$toast.clear(),t.$router.push({name:"OrderPay",params:{orderSn:t.orderSn,actualPrice:t.actualPrice}}),e.next=11;break;case 7:e.prev=7,e.t0=e["catch"](0),console.log("下单失败",e.t0),setTimeout(Object(u["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(t.retryCount--,!(t.retryCount>0)){e.next=6;break}return e.next=4,t.searchResult(t.orderSn);case 4:e.next=7;break;case 6:t.$toast.fail("抱歉，创建订单失败！");case 7:case"end":return e.stop()}}),e)}))),t.retryInterval);case 11:case"end":return e.stop()}}),e,null,[[0,7]])})))()}}},m=f,b=(r("4ef2"),r("2877")),p=Object(b["a"])(m,s,i,!1,null,"1e8d52d0",null),h=p.exports,v={name:"OrderConfirm",components:{ListItem:h},data:function(){return{contact:{type:"add",name:"",tel:""}}},computed:Object(c["a"])({},Object(o["b"])(["selectedAddress"])),mounted:function(){},activated:function(){var t=this;if(!this.selectedAddress.id&&sessionStorage.getItem("contact")&&(this["address/SET_SELECTED_ADDRESS"](JSON.parse(sessionStorage.getItem("contact"))),sessionStorage.removeItem("contact")),this.selectedAddress.id){var e=this.selectedAddress,r=e.name,n=e.tel;this.contact.type="edit",this.contact.name=r,this.contact.tel=n}else this.contact.type="add";window.addEventListener("beforeunload",(function(){sessionStorage.setItem("contact",JSON.stringify(t.selectedAddress))}))},methods:Object(c["a"])({onContact:function(){this.$router.push({path:"/address"})}},Object(o["c"])(["address/SET_SELECTED_ADDRESS"]))},g=v,O=(r("212a"),Object(b["a"])(g,n,a,!1,null,"77d669f6",null));e["default"]=O.exports},"4ef2":function(t,e,r){"use strict";r("c91c")},5530:function(t,e,r){"use strict";r.d(e,"a",(function(){return c}));r("b64b"),r("a4d3"),r("4de4"),r("d3b7"),r("e439"),r("159b"),r("dbb4");function n(t,e,r){return e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function a(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),r.push.apply(r,n)}return r}function c(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?a(Object(r),!0).forEach((function(e){n(t,e,r[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):a(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}},"99af":function(t,e,r){"use strict";var n=r("23e7"),a=r("da84"),c=r("d039"),o=r("e8b5"),s=r("861d"),i=r("7b0b"),u=r("07fa"),d=r("8418"),l=r("65f0"),f=r("1dde"),m=r("b622"),b=r("2d00"),p=m("isConcatSpreadable"),h=9007199254740991,v="Maximum allowed index exceeded",g=a.TypeError,O=b>=51||!c((function(){var t=[];return t[p]=!1,t.concat()[0]!==t})),j=f("concat"),_=function(t){if(!s(t))return!1;var e=t[p];return void 0!==e?!!e:o(t)},y=!O||!j;n({target:"Array",proto:!0,forced:y},{concat:function(t){var e,r,n,a,c,o=i(this),s=l(o,0),f=0;for(e=-1,n=arguments.length;e<n;e++)if(c=-1===e?o:arguments[e],_(c)){if(a=u(c),f+a>h)throw g(v);for(r=0;r<a;r++,f++)r in c&&d(s,f,c[r])}else{if(f>=h)throw g(v);d(s,f++,c)}return s.length=f,s}})},b64b:function(t,e,r){var n=r("23e7"),a=r("7b0b"),c=r("df75"),o=r("d039"),s=o((function(){c(1)}));n({target:"Object",stat:!0,forced:s},{keys:function(t){return c(a(t))}})},c91c:function(t,e,r){},dbb4:function(t,e,r){var n=r("23e7"),a=r("83ab"),c=r("56ef"),o=r("fc6a"),s=r("06cf"),i=r("8418");n({target:"Object",stat:!0,sham:!a},{getOwnPropertyDescriptors:function(t){var e,r,n=o(t),a=s.f,u=c(n),d={},l=0;while(u.length>l)r=a(n,e=u[l++]),void 0!==r&&i(d,e,r);return d}})},e439:function(t,e,r){var n=r("23e7"),a=r("d039"),c=r("fc6a"),o=r("06cf").f,s=r("83ab"),i=a((function(){o(1)})),u=!s||i;n({target:"Object",stat:!0,forced:u,sham:!s},{getOwnPropertyDescriptor:function(t,e){return o(c(t),e)}})},f732:function(t,e,r){},f8b7:function(t,e,r){"use strict";r.d(e,"k",(function(){return a})),r.d(e,"j",(function(){return c})),r.d(e,"d",(function(){return o})),r.d(e,"g",(function(){return s})),r.d(e,"e",(function(){return i})),r.d(e,"i",(function(){return u})),r.d(e,"f",(function(){return d})),r.d(e,"a",(function(){return l})),r.d(e,"h",(function(){return f})),r.d(e,"c",(function(){return m})),r.d(e,"b",(function(){return b}));var n=r("b775");function a(t){return Object(n["a"])({url:"/order/submit",method:"post",data:t})}function c(){return Object(n["a"])({url:"/order/statusCount",method:"post"})}function o(t){return Object(n["a"])({url:"/order/detail/".concat(t),method:"get"})}function s(t){return Object(n["a"])({url:"/order/prepay",method:"post",data:t})}function i(t){return Object(n["a"])({url:"/order/h5pay",method:"post",data:t})}function u(t){return Object(n["a"])({url:"/order/searchResult/"+t+"?t="+(new Date).getTime(),method:"get"})}function d(t){return Object(n["a"])({url:"/order/list",method:"get",params:t})}function l(t){return Object(n["a"])({url:"/order/cancel/"+t,method:"post"})}function f(t){return Object(n["a"])({url:"/order/refund/"+t,method:"post"})}function m(t){return Object(n["a"])({url:"/order/delete/"+t,method:"post"})}function b(t){return Object(n["a"])({url:"/order/confirm/"+t,method:"post"})}}}]);
//# sourceMappingURL=chunk-25dd58f2.43e714aa.js.map