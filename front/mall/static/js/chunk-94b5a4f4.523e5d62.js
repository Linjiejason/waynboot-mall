(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-94b5a4f4"],{"0717":function(t,e,i){"use strict";i("5c50")},"0969":function(t,e,i){"use strict";i("8a48")},"10fa":function(t,e,i){},"162c7":function(t,e,i){"use strict";var n=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"product-item",on:{click:t.onClick}},[i("image-pic",{attrs:{src:t.img,width:"90",height:"90"}}),i("div",{staticClass:"desc"},[i("div",{staticClass:"desc__top"},[i("h3",{staticClass:"desc__top__title"},[t._v(t._s(t.title))]),i("p",{staticClass:"desc__top__info"},[t._v(t._s(t.desc))])]),i("div",{staticClass:"desc__bottom"},[i("div",{staticClass:"desc__bottom__info"},[i("p",{staticClass:"price"},[i("span",{staticClass:"price--new"},[t._v("¥"+t._s(t.price))]),i("span",{staticClass:"price--old"},[t._v("¥"+t._s(t.discount))])]),i("div",{staticClass:"tag"},[i("van-tag",{attrs:{type:"danger"}},[t._v("自营")])],1),t._m(0)]),i("div",{staticClass:"desc__bottom__btn"},[i("van-button",{staticClass:"btn",attrs:{size:"mini"},on:{click:function(e){return e.stopPropagation(),t.onAddCart.apply(null,arguments)}}},[t._v("加入购物车")])],1)])])],1)},r=[function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"sale"},[i("span",{staticClass:"commom__num"},[t._v("评论2000+条")]),i("span",{staticClass:"praise__rate"},[t._v("70%好评")])])}],a=i("2166"),o={props:["goodsId","img","title","desc","price","discount","percentage"],methods:{onClick:function(){this.$router.push({path:"/detail/"+this.goodsId})},onAddCart:function(){var t=this;Object(a["b"])({goodsId:this.goodsId,number:1}).then((function(){t.$toast({message:"已添加至购物车",duration:1500}),t.$emit("getCartGoodsCount")}))}}},s=o,c=(i("0717"),i("2877")),d=Object(c["a"])(s,n,r,!1,null,"691289c3",null);e["a"]=d.exports},2166:function(t,e,i){"use strict";i.d(e,"f",(function(){return r})),i.d(e,"e",(function(){return a})),i.d(e,"a",(function(){return o})),i.d(e,"b",(function(){return s})),i.d(e,"h",(function(){return c})),i.d(e,"c",(function(){return d})),i.d(e,"d",(function(){return u})),i.d(e,"g",(function(){return l}));i("99af");var n=i("b775");function r(){return Object(n["a"])({url:"/cart/list",method:"get"})}function a(){return Object(n["a"])({url:"/cart/goodsCount",method:"get"})}function o(t){return Object(n["a"])({url:"/cart",method:"post",data:t})}function s(t){return Object(n["a"])({url:"/cart/addDefaultGoodsProduct",method:"post",data:t})}function c(t){return Object(n["a"])({url:"/cart",method:"put",data:t})}function d(t,e){return Object(n["a"])({url:"/cart/changeNum/".concat(t,"/").concat(e),method:"post"})}function u(t){return Object(n["a"])({url:"/cart/"+t,method:"delete"})}function l(){return Object(n["a"])({url:"/cart/getCheckedGoods",method:"post"})}},"5c50":function(t,e,i){},"6d55":function(t,e,i){"use strict";i.r(e);var n=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"product"},[i("nav-bar",{attrs:{title:t.diamond.name}},[i("van-icon",{attrs:{name:"shopping-cart-o",color:t.variables.black,badge:t.count,size:"18"},on:{click:t.cartClick}})],1),i("div",{staticClass:"banner"},[i("image-pic",{attrs:{src:t.diamond.picUrl,width:"100%",height:"100"}})],1),i("div",{staticClass:"main"},[i("van-pull-refresh",{on:{refresh:t.onRefresh},model:{value:t.refreshing,callback:function(e){t.refreshing=e},expression:"refreshing"}},[i("van-list",{attrs:{finished:t.finished,"finished-text":"没有更多了","immediate-check":!1},on:{load:t.onLoad},model:{value:t.loading,callback:function(e){t.loading=e},expression:"loading"}},t._l(t.list,(function(e,n){return i("product-item",{key:n,staticStyle:{"margin-bottom":"6px"},attrs:{"goods-id":e.id,img:e.picUrl,title:e.name,desc:e.brief,price:e.retailPrice,discount:e.counterPrice},on:{getCartGoodsCount:t.getCartGoodsCount}})})),1)],1)],1),t.isSkeletonShow?i("Skeleton"):t._e()],1)},r=[],a=i("2909"),o=(i("a9e3"),i("d81d"),i("99af"),i("b775"));function s(t){return Object(o["a"])({url:"/diamond/getGoodsList",method:"get",params:t})}var c=i("2166"),d=i("e590"),u=i("162c7"),l=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"skeleton"},[i("ContentLoader",{attrs:{width:"325",height:"600"}},[i("rect",{attrs:{x:"10",y:"5",rx:"3",ry:"3",width:"305",height:"30"}}),i("rect",{attrs:{x:"10",y:"42",rx:"3",ry:"3",width:"305",height:"80"}}),i("rect",{attrs:{x:"10",y:"130",rx:"3",ry:"3",width:"305",height:"80"}}),i("rect",{attrs:{x:"10",y:"220",rx:"3",ry:"3",width:"305",height:"80"}}),i("rect",{attrs:{x:"10",y:"310",rx:"3",ry:"3",width:"305",height:"80"}}),i("rect",{attrs:{x:"10",y:"400",rx:"3",ry:"3",width:"305",height:"20"}}),i("rect",{attrs:{x:"60",y:"435",rx:"3",ry:"3",width:"205",height:"10"}}),i("rect",{attrs:{x:"60",y:"460",rx:"3",ry:"3",width:"205",height:"10"}})])],1)},f=[],p=i("e3303"),h={components:{ContentLoader:p["a"]}},g=h,m=(i("b2aa"),i("2877")),y=Object(m["a"])(g,l,f,!1,null,"b3a3ed76",null),v=y.exports,b=i("cf1e"),C=i.n(b),_={name:"Product",components:{NavBar:d["a"],ProductItem:u["a"],Skeleton:v},props:{diamondId:{type:[Number,String],default:0}},data:function(){return{list:[],diamond:[],initFun:"",count:0,pageNo:1,pageSize:10,loading:!1,finished:!1,refreshing:!1,isSkeletonShow:!0}},computed:{variables:function(){return C.a}},mounted:function(){this.getProductList(),this.getCartGoodsCount()},methods:{getProductList:function(){var t=this;s({pageNum:this.pageNo,pageSize:this.pageSize,diamondId:this.diamondId}).then((function(e){var i=e.map.goods;t.diamond=e.map.diamond,t.refreshing?(t.list=i,t.refreshing=!1):(t.list=[].concat(Object(a["a"])(t.list),Object(a["a"])(i)),i.length<t.pageSize&&t.list.length>0&&(t.finished=!0)),t.loading=!1,t.isSkeletonShow=!1}))},getCartGoodsCount:function(){var t=this;Object(c["e"])().then((function(e){var i=e.map.count;t.count=i})).catch((function(t){}))},onLoad:function(){this.loading=!0,this.pageNo+=1,this.getProductList()},onRefresh:function(){this.refreshing=!0,this.pageNo=1,this.getProductList()},cartClick:function(){this.$router.push({name:"Cart"})}}},x=_,w=(i("0969"),Object(m["a"])(x,n,r,!1,null,"dcc06726",null));e["default"]=w.exports},"8a48":function(t,e,i){},"92fa":function(t,e){var i=/^(attrs|props|on|nativeOn|class|style|hook)$/;function n(t,e){return function(){t&&t.apply(this,arguments),e&&e.apply(this,arguments)}}t.exports=function(t){return t.reduce((function(t,e){var r,a,o,s,c;for(o in e)if(r=t[o],a=e[o],r&&i.test(o))if("class"===o&&("string"===typeof r&&(c=r,t[o]=r={},r[c]=!0),"string"===typeof a&&(c=a,e[o]=a={},a[c]=!0)),"on"===o||"nativeOn"===o||"hook"===o)for(s in a)r[s]=n(r[s],a[s]);else if(Array.isArray(r))t[o]=r.concat(a);else if(Array.isArray(a))t[o]=[r].concat(a);else for(s in a)r[s]=a[s];else t[o]=e[o];return t}),{})}},"99af":function(t,e,i){"use strict";var n=i("23e7"),r=i("da84"),a=i("d039"),o=i("e8b5"),s=i("861d"),c=i("7b0b"),d=i("07fa"),u=i("8418"),l=i("65f0"),f=i("1dde"),p=i("b622"),h=i("2d00"),g=p("isConcatSpreadable"),m=9007199254740991,y="Maximum allowed index exceeded",v=r.TypeError,b=h>=51||!a((function(){var t=[];return t[g]=!1,t.concat()[0]!==t})),C=f("concat"),_=function(t){if(!s(t))return!1;var e=t[g];return void 0!==e?!!e:o(t)},x=!b||!C;n({target:"Array",proto:!0,forced:x},{concat:function(t){var e,i,n,r,a,o=c(this),s=l(o,0),f=0;for(e=-1,n=arguments.length;e<n;e++)if(a=-1===e?o:arguments[e],_(a)){if(r=d(a),f+r>m)throw v(y);for(i=0;i<r;i++,f++)i in a&&u(s,f,a[i])}else{if(f>=m)throw v(y);u(s,f++,a)}return s.length=f,s}})},b2aa:function(t,e,i){"use strict";i("10fa")},e3303:function(t,e,i){"use strict";i.d(e,"a",(function(){return o}));var n=i("92fa"),r=i.n(n),a=function(){return Math.random().toString(36).substring(2)},o={name:"ContentLoader",functional:!0,props:{width:{type:[Number,String],default:400},height:{type:[Number,String],default:130},speed:{type:Number,default:2},preserveAspectRatio:{type:String,default:"xMidYMid meet"},baseUrl:{type:String,default:""},primaryColor:{type:String,default:"#f9f9f9"},secondaryColor:{type:String,default:"#ecebeb"},primaryOpacity:{type:Number,default:1},secondaryOpacity:{type:Number,default:1},uniqueKey:{type:String},animate:{type:Boolean,default:!0}},render:function(t,e){var i=e.props,n=e.data,o=e.children,s=i.uniqueKey?i.uniqueKey+"-idClip":a(),c=i.uniqueKey?i.uniqueKey+"-idGradient":a();return t("svg",r()([n,{attrs:{viewBox:"0 0 "+i.width+" "+i.height,version:"1.1",preserveAspectRatio:i.preserveAspectRatio}}]),[t("rect",{style:{fill:"url("+i.baseUrl+"#"+c+")"},attrs:{"clip-path":"url("+i.baseUrl+"#"+s+")",x:"0",y:"0",width:i.width,height:i.height}}),t("defs",[t("clipPath",{attrs:{id:s}},[o||t("rect",{attrs:{x:"0",y:"0",rx:"5",ry:"5",width:i.width,height:i.height}})]),t("linearGradient",{attrs:{id:c}},[t("stop",{attrs:{offset:"0%","stop-color":i.primaryColor,"stop-opacity":i.primaryOpacity}},[i.animate?t("animate",{attrs:{attributeName:"offset",values:"-2; 1",dur:i.speed+"s",repeatCount:"indefinite"}}):null]),t("stop",{attrs:{offset:"50%","stop-color":i.secondaryColor,"stop-opacity":i.secondaryOpacity}},[i.animate?t("animate",{attrs:{attributeName:"offset",values:"-1.5; 1.5",dur:i.speed+"s",repeatCount:"indefinite"}}):null]),t("stop",{attrs:{offset:"100%","stop-color":i.primaryColor,"stop-opacity":i.primaryOpacity}},[i.animate?t("animate",{attrs:{attributeName:"offset",values:"-1; 2",dur:i.speed+"s",repeatCount:"indefinite"}}):null])])])])}}}}]);
//# sourceMappingURL=chunk-94b5a4f4.523e5d62.js.map