(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-9b6b845a"],{"063c":function(t,e,n){"use strict";n.d(e,"a",(function(){return a})),n.d(e,"b",(function(){return o})),n.d(e,"c",(function(){return i}));var r=n("b775");function a(t){return Object(r["a"])({url:"/comment",method:"post",data:t})}function o(t){return r["a"].formDataPost("/comment/list",t)}function i(t){return r["a"].formDataPost("/comment/tagNum",t)}},"91b6":function(t,e,n){"use strict";n.d(e,"a",(function(){return a})),n.d(e,"b",(function(){return o}));var r=n("b775");function a(t){return r["a"].formDataPost("/common/base64uploadFile",t)}function o(t){return Object(r["a"])({url:"/common/base64uploadFileList",method:"post",data:t})}},"99af":function(t,e,n){"use strict";var r=n("23e7"),a=n("da84"),o=n("d039"),i=n("e8b5"),c=n("861d"),s=n("7b0b"),u=n("07fa"),l=n("8418"),d=n("65f0"),f=n("1dde"),p=n("b622"),m=n("2d00"),b=p("isConcatSpreadable"),h=9007199254740991,v="Maximum allowed index exceeded",g=a.TypeError,w=m>=51||!o((function(){var t=[];return t[b]=!1,t.concat()[0]!==t})),x=f("concat"),y=function(t){if(!c(t))return!1;var e=t[b];return void 0!==e?!!e:i(t)},k=!w||!x;r({target:"Array",proto:!0,forced:k},{concat:function(t){var e,n,r,a,o,i=s(this),c=d(i,0),f=0;for(e=-1,r=arguments.length;e<r;e++)if(o=-1===e?i:arguments[e],y(o)){if(a=u(o),f+a>h)throw g(v);for(n=0;n<a;n++,f++)n in o&&l(c,f,o[n])}else{if(f>=h)throw g(v);l(c,f++,o)}return c.length=f,c}})},b817:function(t,e,n){"use strict";n("fc94")},f5ef:function(t,e,n){"use strict";n.r(e);var r=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"goodsComment"},[n("nav-bar",{attrs:{title:t.$route.meta.title}},[n("span",{staticStyle:{color:"#333"}},[n("svg-icon",{attrs:{"icon-class":"share",width:15,height:15}})],1)]),n("van-form",{on:{submit:t.onSubmit}},[n("van-field",{attrs:{label:"商品评价",rules:[{validator:t.rateValidator,message:"请选择商品评价"}]},scopedSlots:t._u([{key:"input",fn:function(){return[n("van-rate",{model:{value:t.star,callback:function(e){t.star=e},expression:"star"}})]},proxy:!0}]),model:{value:t.content,callback:function(e){t.content=e},expression:"content"}}),n("van-field",{attrs:{rules:[{required:!0}],rows:"2",autosize:"",type:"textarea",maxlength:"140",placeholder:"写出您的感受，帮助更多小伙伴！","show-word-limit":""},model:{value:t.content,callback:function(e){t.content=e},expression:"content"}}),n("van-field",{attrs:{name:"uploader"},scopedSlots:t._u([{key:"input",fn:function(){return[n("van-uploader",{attrs:{multiple:"","max-count":9,"after-read":t.afterRead,"preview-size":"6.9rem"},model:{value:t.uploader,callback:function(e){t.uploader=e},expression:"uploader"}})]},proxy:!0}])}),n("div",{staticStyle:{margin:"16px"}},[n("van-button",{attrs:{round:"",block:"",type:"info","native-type":"submit"}},[t._v("提交")])],1)],1)],1)},a=[],o=n("2909"),i=n("1da1"),c=(n("96cf"),n("a9e3"),n("d3b7"),n("159b"),n("b0c0"),n("d81d"),n("99af"),n("91b6")),s=n("063c"),u={props:{orderGoodsId:{type:[String,Number],default:0},goodsId:{type:[String,Number],default:0}},data:function(){return{star:0,content:"",uploader:[],picUrls:[]}},methods:{afterRead:function(t){var e=this;return Object(i["a"])(regeneratorRuntime.mark((function n(){var r,a,i;return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:return e.$toast.loading({message:"正在上传...",forbidClick:!0,overlay:!0}),t instanceof Array||(t=[t]),r=[],t.forEach((function(t){r.push({base64content:t.content,filename:t.file.name})})),n.next=6,Object(c["b"])(r);case 6:a=n.sent,i=a.map.fileList.map((function(t){return t.url})),e.picUrls=[].concat(Object(o["a"])(e.picUrls),Object(o["a"])(i)),console.log(e.picUrls),e.$toast.clear(),e.$toast.success("上传图片成功");case 12:case"end":return n.stop()}}),n)})))()},rateValidator:function(t){var e=this;return new Promise((function(n){setTimeout((function(){e.$toast.clear(),n(t>0)}),200)}))},onSubmit:function(t){var e=this,n={star:this.star,content:this.content,picUrls:this.picUrls,hasPicture:this.picUrls.length>0,type:0,valueId:this.goodsId,orderGoodsId:this.orderGoodsId};n.param=this.picUrls.length>0,Object(s["a"])(n).then((function(){e.$dialog.alert({message:"发布成功"}).then((function(){e.$router.go(-1)}))}))}}},l=u,d=(n("b817"),n("2877")),f=Object(d["a"])(l,r,a,!1,null,"1410aa3b",null);e["default"]=f.exports},fc94:function(t,e,n){}}]);
//# sourceMappingURL=chunk-9b6b845a.52644b48.js.map